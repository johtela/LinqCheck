

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>SeqTests - LinqCheck</title>

	<link rel="icon" type="image/x-icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css" />
<link rel="stylesheet" href="../font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="../sidebar/sidebar.min.css" />
<link rel="stylesheet" href="../css/modern.min.css" />
<link rel="stylesheet" href="../syntax-highlight/son-of-obsidian.min.css" />
<link rel="stylesheet" href="../mermaid/mermaid.css" />

</head>

<body>
    
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../index.html"><span><img src="../images/LinqCheck.svg" height="24" />  LinqCheck</span></a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="../index.html"><i class="fa fa-home" aria-hidden="true"></i> Home</a></li>
					<li><a href="https://github.com/johtela/LinqCheck"><i class="fa fa-github" aria-hidden="true"></i> GitHub Repository</a></li>
                    <li><a href="../License.html">License</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="col-md-3 hidden-xs hidden-sm">
                
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4>On This Page</h4>
            </div>
            <div id="header-menu" class="panel-body main-menu">
                <ul></ul>
            </div>
        </div>  
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4>Table of Contents</h4>
            </div>
            <div class="panel-body main-menu">
                <ul>
	<li><a href="../index.html">Home</a></li>
	<ul>
		<li>LinqCheck home page.</li>
	</ul>
	<li><a href="../Examples/BasicTests.html">BasicTests</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../Examples/SeqTests.html" class="selected">SeqTests</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../Examples/RunTests.html">RunTests</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../src/Arbitrary.html">Arbitrary</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../src/Container.html">Container</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../src/DefaultArbitrary.html">DefaultArbitrary</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../src/Gen.html">Gen</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../src/Prop.html">Prop</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../src/Tester.html">Tester</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../src/TestState.html">TestState</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../License.html">License</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../Examples/UITests/Automated.html">Automated</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../Examples/UITests/Calculator.html">Calculator</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../Examples/UITests/CalculatorTests.html">CalculatorTests</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../Examples/UITests/ModelCalculator.html">ModelCalculator</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../Examples/UITests/Win10Calculator.html">Win10Calculator</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
	<li><a href="../Examples/UITests/Win7Calculator.html">Win7Calculator</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
</ul>
            </div>
        </div>

            </div>
			<div class="col-md-9">
				<ul class="pager">
	<li class="previous"><a href="../Examples/BasicTests.html">Previous: BasicTests</a></li>
	<li class="next"><a href="../Examples/RunTests.html">Next: RunTests</a></li>
</ul>
				<div id="static-content" class="markdown">
					<h1 id="adding-new-arbitrary-types">Adding New Arbitrary Types</h1>
<p>LinqCheck generates test input automatically for the common data types defined
in the .NET framework. This includes primitive types such as <code>bool</code>, <code>char</code>,
<code>int</code>, <code>long</code>, <code>float</code>, and <code>double</code> as well as compound data sructures like
arrays and IEnumerables. But often these are not enough. Your test data might
contain user-defined classes, structures, or interfaces.</p>
<p>The random data generation in LinqCheck is based on the idea of composing
complex data from simpler types. To demonstrate this idea we will generate some
tests for the <a href="https://johtela.github.io/ExtensionCord/src/Seq.html">Seq</a>
class defined in the <a href="https://johtela.github.io/ExtensionCord/">ExtensionCord</a>
library. This is an immutable, singly-linked list designed to be as simple as
possible, so it serves as a good example. The Seq class is also generic, which
allows us to show how tests can be written generically too.</p>
<p>First let's import all the required libraries and namespaces.</p>
<pre class="csharp"><code class="csharp"><span class="keyword" id="Examples">namespace</span> Examples
<span class="punctuation">{</span>
	<span class="keyword">using</span> System<span class="punctuation">.</span>Linq<span class="punctuation">;</span>
	<span class="keyword">using</span> ExtensionCord<span class="punctuation">;</span>
	<span class="keyword">using</span> LinqCheck<span class="punctuation">;</span>

	<span class="keyword" id="Examples.SeqTests">public</span> <span class="keyword">class</span> <span class="typename">SeqTests</span>
	<span class="punctuation">{</span>
</code></pre>
<h2 id="implementing-iarbitrary">Implementing IArbitrary<T></h2>
<p>There needs to be an implementation of <code>IArbitrary&lt;T&gt;</code> interface for
each type <code>T</code> we wish to use in our tests. This implementation generates
random values of type <code>T</code>, and shrinks them when LinqCheck is looking
for a minimal failing test case.</p>
<p>In this case we need to define an implementation of <code>IArbitrary&lt;Seq&lt;T&gt;&gt;</code>.
The easiest way to do that is to create an instance <code>Arbitrary&lt;T&gt;</code> class,
which stores the generator and shrinker for type <code>T</code>. Let's define a
method that does that.</p>
<pre class="csharp"><code class="csharp">		<span class="keyword" id="Examples.SeqTests.ArbitrarySeq<T>()" data-toggle="tooltip" title="Examples.SeqTests.ArbitrarySeq<T>()">public</span> <span class="keyword" data-toggle="tooltip" title="Examples.SeqTests.ArbitrarySeq<T>()">static</span> <span class="typename" data-toggle="tooltip" title="LinqCheck.IArbitrary<ExtensionCord.Seq<T>>"><a href="../src/Arbitrary.html#LinqCheck.IArbitrary<T>">IArbitrary</a></span><span class="punctuation">&lt;</span><span class="typename" data-toggle="tooltip" title="ExtensionCord.Seq<T>">Seq</span><span class="punctuation">&lt;</span><span class="typename" data-toggle="tooltip" title="T"><a href="../Examples/SeqTests.html#T">T</a></span><span class="punctuation">&gt;</span><span class="punctuation">&gt;</span> <span data-toggle="tooltip" title="Examples.SeqTests.ArbitrarySeq<T>()">ArbitrarySeq</span><span class="punctuation">&lt;</span><span class="typename"><a href="../Examples/SeqTests.html#T">T</a></span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span>
		<span class="punctuation">{</span>
</code></pre>
<p>First we need to define the generator for <code>Seq&lt;T&gt;</code> type. Generators
have the type <code>Gen&lt;T&gt;</code> where T is the type of data produced. They
are defined as Linq expressions where complex types are constructed
with built-in or user-defined combinators. In this case we can
utilize the combinator that creates an <code>Gen&lt;IEnumerable&lt;T&gt;&gt;</code> given
a generator of type <code>Gen&lt;T&gt;</code>.</p>
<p>We don't know yet what is the item type <code>T</code> which will be contained
in the seqeuence. Luckily we don't have to. We can assume that the
generator for <code>T</code> is already registered with LinqCheck, and get it
by calling <code>Arbitrary.Gen&lt;T&gt; ()</code>.</p>
<pre class="csharp"><code class="csharp">			<span class="keyword">return</span> <span class="keyword" data-toggle="tooltip" title="LinqCheck.Arbitrary<ExtensionCord.Seq<T>>">new</span> <span class="typename"><a href="../src/Arbitrary.html#LinqCheck.Arbitrary<T>">Arbitrary</a></span><span class="punctuation">&lt;</span><span class="typename" data-toggle="tooltip" title="ExtensionCord.Seq<T>">Seq</span><span class="punctuation">&lt;</span><span class="typename" data-toggle="tooltip" title="T"><a href="../Examples/SeqTests.html#T">T</a></span><span class="punctuation">&gt;</span><span class="punctuation">&gt;</span> <span class="punctuation">(</span>
				<span class="keyword">from</span> e <span class="keyword">in</span> <span class="typename" data-toggle="tooltip" title="LinqCheck.Arbitrary"><a href="../src/Arbitrary.html#LinqCheck.Arbitrary">Arbitrary</a></span><span class="punctuation" data-toggle="tooltip" title="LinqCheck.Arbitrary.Gen<T>()">.</span><span data-toggle="tooltip" title="LinqCheck.Arbitrary.Gen<T>()"><a href="../src/Arbitrary.html#LinqCheck.Arbitrary.Gen<T>()">Gen</a></span><span class="punctuation">&lt;</span><span class="typename" data-toggle="tooltip" title="T"><a href="../Examples/SeqTests.html#T">T</a></span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation" data-toggle="tooltip" title="LinqCheck.Gen<T>.EnumerableOf<T>()">.</span><span data-toggle="tooltip" title="LinqCheck.Gen<T>.EnumerableOf<T>()"><a href="../src/Gen.html#LinqCheck.Gen.EnumerableOf<T>(LinqCheck.Gen<T>)">EnumerableOf</a></span> <span class="punctuation">(</span><span class="punctuation">)</span>
				<span class="keyword" data-toggle="tooltip" title="LinqCheck.Gen<ExtensionCord.Seq<T>>">select</span> <span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>">e</span><span class="punctuation" data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.ToSeq<T>()">.</span><span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.ToSeq<T>()">ToSeq</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
</code></pre>
<p>We also need to provide a way to shrink the failed sequence
to simpler versions. Again, we take advantage of the fact
that <code>Seq&lt;T&gt;</code> implements <code>IEnumerable&lt;T&gt;</code>, so we can use
the built-in combinator to do the shrinking. Lastly, we
convert the shrinked IEnumerables back to Seqs.</p>
<pre class="csharp"><code class="csharp">				seq <span class="punctuation" data-toggle="tooltip" title="lambda expression">=&gt;</span>
					<span class="keyword">from</span> e <span class="keyword">in</span> <span data-toggle="tooltip" title="ExtensionCord.Seq<T>">seq</span><span class="punctuation" data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.ShrinkEnumerable<T>()">.</span><span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.ShrinkEnumerable<T>()"><a href="../src/DefaultArbitrary.html#LinqCheck.DefaultArbitrary.ShrinkEnumerable<T>(System.Collections.Generic.IEnumerable<T>)">ShrinkEnumerable</a></span> <span class="punctuation">(</span><span class="punctuation">)</span>
					<span class="keyword" data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<ExtensionCord.Seq<T>>">select</span> <span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>">e</span><span class="punctuation" data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.ToSeq<T>()">.</span><span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.ToSeq<T>()">ToSeq</span> <span class="punctuation">(</span><span class="punctuation">)</span>
				<span class="punctuation">)</span><span class="punctuation">;</span>
		<span class="punctuation">}</span>
</code></pre>
<p>It is that simple! Now we have a generic method that can generate
arbitrary sequences of any type <code>T</code> provided that there is an
implementation for <code>IArbitrary&lt;T&gt;</code>.</p>
<h2 id="testing-properties-of-sequences">Testing Properties of Sequences</h2>
<p>So, what properties should all sequences have? Let's start with the
easy ones. First we'll check that the First and Rest properties
are correct. Note that our test method is generic, it can basically
test this property for any sequences of any item type.</p>
<pre class="csharp"><code class="csharp">		<span class="keyword" id="Examples.SeqTests.CheckFirstAndRest<T>()" data-toggle="tooltip" title="Examples.SeqTests.CheckFirstAndRest<T>()">public</span> <span class="keyword" data-toggle="tooltip" title="void">void</span> <span data-toggle="tooltip" title="Examples.SeqTests.CheckFirstAndRest<T>()">CheckFirstAndRest</span><span class="punctuation">&lt;</span><span class="typename"><a href="../Examples/SeqTests.html#T">T</a></span><span class="punctuation">&gt;</span><span class="punctuation">(</span><span class="punctuation">)</span>
		<span class="punctuation">{</span>
</code></pre>
<p>We get a random sequence by calling the method defined above.</p>
<pre class="csharp"><code class="csharp">			<span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>>">(</span><span class="keyword">from</span> seq <span class="keyword">in</span> <span class="typename" data-toggle="tooltip" title="LinqCheck.Prop"><a href="../src/Prop.html#LinqCheck.Prop">Prop</a></span><span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop.ForAll<ExtensionCord.Seq<T>>(LinqCheck.IArbitrary<ExtensionCord.Seq<T>>)">.</span><span data-toggle="tooltip" title="LinqCheck.Prop.ForAll<ExtensionCord.Seq<T>>(LinqCheck.IArbitrary<ExtensionCord.Seq<T>>)"><a href="../src/Prop.html#LinqCheck.Prop.ForAll<T>(LinqCheck.IArbitrary<T>)">ForAll</a></span> <span class="punctuation">(</span><span data-toggle="tooltip" title="Examples.SeqTests.ArbitrarySeq<T>()"><a href="../Examples/SeqTests.html#Examples.SeqTests.ArbitrarySeq<T>()">ArbitrarySeq</a></span><span class="punctuation">&lt;</span><span class="typename" data-toggle="tooltip" title="T"><a href="../Examples/SeqTests.html#T">T</a></span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span>
</code></pre>
<p>There is no first item, if the sequence is empty, so we filter
out all such sequences.</p>
<pre class="csharp"><code class="csharp">			 <span class="keyword">where</span> <span class="punctuation" data-toggle="tooltip" title="bool">!</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>">seq</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>.IsEmpty<T>()">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>.IsEmpty<T>()">IsEmpty</span> <span class="punctuation">(</span><span class="punctuation">)</span>
</code></pre>
<p>Now we can return the test sequence and its first and rest
fields.</p>
<pre class="csharp"><code class="csharp">			 <span class="keyword" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>>">select</span> <span class="keyword" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>">new</span> <span class="punctuation" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>">{</span> <span data-toggle="tooltip" title="ExtensionCord.Seq<T>">seq</span><span class="punctuation" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>">,</span> <span data-toggle="tooltip" title="ExtensionCord.Seq<T>">seq</span><span class="punctuation" data-toggle="tooltip" title="T">.</span><span data-toggle="tooltip" title="T">First</span><span class="punctuation" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>">,</span> <span data-toggle="tooltip" title="ExtensionCord.Seq<T>">seq</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>">Rest</span> <span class="punctuation" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>">}</span><span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>>">)</span>
</code></pre>
<p><code>Enumerable.First ()</code> extension method gives us the first item of
an IEnumerable which should correspond to the value of the First
property.</p>
<pre class="csharp"><code class="csharp">			<span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>>.Check<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>>(System.Linq.Expressions.Expression<System.Func<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>, bool>>, int)">.</span><span data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>>.Check<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>>(System.Linq.Expressions.Expression<System.Func<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>, bool>>, int)"><a href="../src/Prop.html#LinqCheck.Prop.Check<T>(LinqCheck.Prop<T>, System.Linq.Expressions.Expression<System.Func<T, bool>>, int)">Check</a></span> <span class="punctuation">(</span>t <span class="punctuation" data-toggle="tooltip" title="lambda expression">=&gt;</span> <span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>">t</span><span class="punctuation" data-toggle="tooltip" title="T">.</span><span data-toggle="tooltip" title="T"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>.First">First</a></span><span class="punctuation" data-toggle="tooltip" title="object.Equals(object)">.</span><span data-toggle="tooltip" title="object.Equals(object)">Equals</span> <span class="punctuation">(</span><span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>.seq">seq</a></span><span class="punctuation" data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.First<T>()">.</span><span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.First<T>()">First</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span>
</code></pre>
<p>We use the <code>Enumerable.Skip ()</code> method to skip the first item and
compare the remaining items to the sequence pointed by the Rest
field. We use the helper method defined in the ExtensionCord library
to check that the two IEnumerables contain the same items. Note
that an empty sequence is represented by <code>null</code>, which would crash
the <code>SequenceEqual</code> method. So, we have to test that the sequence
to which the Rest property points to is not empty.</p>
<pre class="csharp"><code class="csharp">			<span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>>.Check<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>>(System.Linq.Expressions.Expression<System.Func<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>, bool>>, int)">.</span><span data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>>.Check<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>>(System.Linq.Expressions.Expression<System.Func<<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>, bool>>, int)"><a href="../src/Prop.html#LinqCheck.Prop.Check<T>(LinqCheck.Prop<T>, System.Linq.Expressions.Expression<System.Func<T, bool>>, int)">Check</a></span> <span class="punctuation">(</span>t <span class="punctuation" data-toggle="tooltip" title="lambda expression">=&gt;</span> <span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>.Rest">Rest</a></span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>.IsEmpty<T>()">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>.IsEmpty<T>()">IsEmpty</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation" data-toggle="tooltip" title="bool">||</span> <span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>.Rest">Rest</a></span><span class="punctuation" data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.SequenceEqual<T>(System.Collections.Generic.IEnumerable<T>)">.</span><span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.SequenceEqual<T>(System.Collections.Generic.IEnumerable<T>)">SequenceEqual</span> <span class="punctuation">(</span><span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T First, ExtensionCord.Seq<T> Rest>.seq">seq</a></span><span class="punctuation" data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.Skip<T>(int)">.</span><span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.Skip<T>(int)">Skip</span> <span class="punctuation">(</span><span class="number" data-toggle="tooltip" title="int">1</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
		<span class="punctuation">}</span>
</code></pre>
<p>It does not really matter which item type we use to test the sequence,
since the it should work the same way with any type. However, it is not
possible to run a generic test method, so let's use <code>int</code>, <code>double</code>,
and <code>string</code> as example item types. You can use any type for which there
is an IArbitrary implementation registered.</p>
<pre class="csharp"><code class="csharp">		<span class="punctuation">[</span><span class="typename" data-toggle="tooltip" title="LinqCheck.TestAttribute"><a href="../src/Tester.html#LinqCheck.TestAttribute.TestAttribute()">Test</a></span><span class="punctuation">]</span>
		<span class="keyword" id="Examples.SeqTests.TestFirstAndRest()" data-toggle="tooltip" title="Examples.SeqTests.TestFirstAndRest()">public</span> <span class="keyword" data-toggle="tooltip" title="void">void</span> <span data-toggle="tooltip" title="Examples.SeqTests.TestFirstAndRest()">TestFirstAndRest</span> <span class="punctuation">(</span><span class="punctuation">)</span>
		<span class="punctuation">{</span>
			<span data-toggle="tooltip" title="Examples.SeqTests.CheckFirstAndRest<int>()"><a href="../Examples/SeqTests.html#Examples.SeqTests.CheckFirstAndRest<T>()">CheckFirstAndRest</a></span><span class="punctuation">&lt;</span><span class="keyword" data-toggle="tooltip" title="int">int</span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
			<span data-toggle="tooltip" title="Examples.SeqTests.CheckFirstAndRest<double>()"><a href="../Examples/SeqTests.html#Examples.SeqTests.CheckFirstAndRest<T>()">CheckFirstAndRest</a></span><span class="punctuation">&lt;</span><span class="keyword" data-toggle="tooltip" title="double">double</span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
			<span data-toggle="tooltip" title="Examples.SeqTests.CheckFirstAndRest<string>()"><a href="../Examples/SeqTests.html#Examples.SeqTests.CheckFirstAndRest<T>()">CheckFirstAndRest</a></span><span class="punctuation">&lt;</span><span class="keyword" data-toggle="tooltip" title="string">string</span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
		<span class="punctuation">}</span>
</code></pre>
<p>When we run this test, we should get the following output:</p>
<pre><code>Executing tests for fixture: SeqTests
't.First.Equals(Convert(t.seq.First()))' passed 86 tests. Discarded: 14
'(t.Rest.IsEmpty() OrElse t.Rest.SequenceEqual(t.seq.Skip(1)))' passed 89 tests. Discarded: 11
't.First.Equals(Convert(t.seq.First()))' passed 95 tests. Discarded: 5
'(t.Rest.IsEmpty() OrElse t.Rest.SequenceEqual(t.seq.Skip(1)))' passed 90 tests. Discarded: 10
't.First.Equals(Convert(t.seq.First()))' passed 88 tests. Discarded: 12
'(t.Rest.IsEmpty() OrElse t.Rest.SequenceEqual(t.seq.Skip(1)))' passed 88 tests. Discarded: 12
00:00:00.0335073 - TestFirstAndRest

All tests passed. 3 tests run in 00:00:00.0677541.
</code></pre>
<p>Note that some test cases are now discarded. This happens because
we specified that we only want to use sequences that are not empty. The
where clause essentially throws away inputs which do not satisfy this
condition. So, our test set is a bit smaller.</p>
<p>There are two ways you can make the test set bigger: You can increase
the number of test cases generated by providing the second argument to
the <code>Check</code> method. The other option is to implement new <code>ArbitrarySeq</code>
so, that it never creates an empty sequence. This would not be desireable
in all tests, though.</p>
<h2 id="testing-addition">Testing Addition</h2>
<p>So, now we are convinced that an arbitrary sequence generated from
IEnumerable is well-formed. What happens if we add an item to it?
Let's find out.</p>
<pre class="csharp"><code class="csharp">		<span class="keyword" id="Examples.SeqTests.CheckAddition<T>()" data-toggle="tooltip" title="Examples.SeqTests.CheckAddition<T>()">public</span> <span class="keyword" data-toggle="tooltip" title="void">void</span> <span data-toggle="tooltip" title="Examples.SeqTests.CheckAddition<T>()">CheckAddition</span><span class="punctuation">&lt;</span><span class="typename"><a href="../Examples/SeqTests.html#T">T</a></span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span>
		<span class="punctuation">{</span>
</code></pre>
<p>First we generate an arbitrary sequence the same way as in the
previous example.</p>
<pre class="csharp"><code class="csharp">			<span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>">(</span><span class="keyword">from</span> seq <span class="keyword">in</span> <span class="typename" data-toggle="tooltip" title="LinqCheck.Prop"><a href="../src/Prop.html#LinqCheck.Prop">Prop</a></span><span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop.ForAll<ExtensionCord.Seq<T>>(LinqCheck.IArbitrary<ExtensionCord.Seq<T>>)">.</span><span data-toggle="tooltip" title="LinqCheck.Prop.ForAll<ExtensionCord.Seq<T>>(LinqCheck.IArbitrary<ExtensionCord.Seq<T>>)"><a href="../src/Prop.html#LinqCheck.Prop.ForAll<T>(LinqCheck.IArbitrary<T>)">ForAll</a></span> <span class="punctuation">(</span><span data-toggle="tooltip" title="Examples.SeqTests.ArbitrarySeq<T>()"><a href="../Examples/SeqTests.html#Examples.SeqTests.ArbitrarySeq<T>()">ArbitrarySeq</a></span><span class="punctuation">&lt;</span><span class="typename" data-toggle="tooltip" title="T"><a href="../Examples/SeqTests.html#T">T</a></span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span>
</code></pre>
<p>Then we construct a new sequence by adding an arbitrary item to it.</p>
<pre class="csharp"><code class="csharp">			 <span class="keyword">from</span> item <span class="keyword">in</span> <span class="typename" data-toggle="tooltip" title="LinqCheck.Prop"><a href="../src/Prop.html#LinqCheck.Prop">Prop</a></span><span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop.ForAll<T>()">.</span><span data-toggle="tooltip" title="LinqCheck.Prop.ForAll<T>()"><a href="../src/Prop.html#LinqCheck.Prop.ForAll<T>()">ForAll</a></span><span class="punctuation">&lt;</span><span class="typename" data-toggle="tooltip" title="T"><a href="../Examples/SeqTests.html#T">T</a></span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span>
			 <span class="keyword">let</span> newSeq <span class="punctuation">=</span> <span data-toggle="tooltip" title="T">item</span> <span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">|</span> <span data-toggle="tooltip" title="ExtensionCord.Seq<T>">seq</span>
</code></pre>
<p>Then we return all three in the test case.</p>
<pre class="csharp"><code class="csharp">			 <span class="keyword" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>">select</span> <span class="keyword" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">new</span> <span class="punctuation" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">{</span> <span data-toggle="tooltip" title="ExtensionCord.Seq<T>">seq</span><span class="punctuation" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">,</span> <span data-toggle="tooltip" title="T">item</span><span class="punctuation" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">,</span> <span data-toggle="tooltip" title="ExtensionCord.Seq<T>">newSeq</span> <span class="punctuation" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">}</span><span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>">)</span>
</code></pre>
<p>Let's first check that the new sequence is one item longer than
the original. As before, we need to prepare for the possibility
that the sequence might be <code>null</code>. In that case, we cannot use
the <code>Count</code> extension method.</p>
<pre class="csharp"><code class="csharp">			<span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>.Check<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>(System.Linq.Expressions.Expression<System.Func<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>, bool>>, int)">.</span><span data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>.Check<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>(System.Linq.Expressions.Expression<System.Func<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>, bool>>, int)"><a href="../src/Prop.html#LinqCheck.Prop.Check<T>(LinqCheck.Prop<T>, System.Linq.Expressions.Expression<System.Func<T, bool>>, int)">Check</a></span> <span class="punctuation">(</span>t <span class="punctuation" data-toggle="tooltip" title="lambda expression">=&gt;</span> <span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.newSeq">newSeq</a></span><span class="punctuation" data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.Count<T>()">.</span><span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.Count<T>()">Count</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation" data-toggle="tooltip" title="bool">==</span> 
				<span class="punctuation" data-toggle="tooltip" title="int">(</span><span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.seq">seq</a></span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>.IsEmpty<T>()">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>.IsEmpty<T>()">IsEmpty</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation" data-toggle="tooltip" title="int">?</span> <span class="number" data-toggle="tooltip" title="int">0</span> <span class="punctuation" data-toggle="tooltip" title="int">:</span> <span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.seq">seq</a></span><span class="punctuation" data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.Count<T>()">.</span><span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.Count<T>()">Count</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation" data-toggle="tooltip" title="int">)</span> <span class="punctuation" data-toggle="tooltip" title="int">+</span> <span class="number" data-toggle="tooltip" title="int">1</span><span class="punctuation">)</span>
</code></pre>
<p>Then we should verify that the added item is the first item of
the new sequence.</p>
<pre class="csharp"><code class="csharp">			<span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>.Check<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>(System.Linq.Expressions.Expression<System.Func<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>, bool>>, int)">.</span><span data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>.Check<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>(System.Linq.Expressions.Expression<System.Func<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>, bool>>, int)"><a href="../src/Prop.html#LinqCheck.Prop.Check<T>(LinqCheck.Prop<T>, System.Linq.Expressions.Expression<System.Func<T, bool>>, int)">Check</a></span> <span class="punctuation">(</span>t <span class="punctuation" data-toggle="tooltip" title="lambda expression">=&gt;</span> <span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.newSeq">newSeq</a></span><span class="punctuation" data-toggle="tooltip" title="T">.</span><span data-toggle="tooltip" title="T">First</span><span class="punctuation" data-toggle="tooltip" title="object.Equals(object)">.</span><span data-toggle="tooltip" title="object.Equals(object)">Equals</span> <span class="punctuation">(</span><span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="T">.</span><span data-toggle="tooltip" title="T"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.item">item</a></span><span class="punctuation">)</span><span class="punctuation">)</span>
</code></pre>
<p>Last we should check that the rest of the new sequence is the
same as the original one. Empty sequences need to be accounted
for in this check too.</p>
<pre class="csharp"><code class="csharp">			<span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>.Check<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>(System.Linq.Expressions.Expression<System.Func<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>, bool>>, int)">.</span><span data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>.Check<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>(System.Linq.Expressions.Expression<System.Func<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>, bool>>, int)"><a href="../src/Prop.html#LinqCheck.Prop.Check<T>(LinqCheck.Prop<T>, System.Linq.Expressions.Expression<System.Func<T, bool>>, int)">Check</a></span> <span class="punctuation">(</span>t <span class="punctuation" data-toggle="tooltip" title="lambda expression">=&gt;</span> <span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.newSeq">newSeq</a></span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>">Rest</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>.IsEmpty<T>()">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>.IsEmpty<T>()">IsEmpty</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation" data-toggle="tooltip" title="bool">||</span> 
				<span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.newSeq">newSeq</a></span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>">Rest</span><span class="punctuation" data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.SequenceEqual<T>(System.Collections.Generic.IEnumerable<T>)">.</span><span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.SequenceEqual<T>(System.Collections.Generic.IEnumerable<T>)">SequenceEqual</span> <span class="punctuation">(</span><span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.seq">seq</a></span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
		<span class="punctuation">}</span>
</code></pre>
<p>As before, we need to use instantiate few sequences to run the checks.</p>
<pre class="csharp"><code class="csharp">		<span class="punctuation">[</span><span class="typename" data-toggle="tooltip" title="LinqCheck.TestAttribute"><a href="../src/Tester.html#LinqCheck.TestAttribute.TestAttribute()">Test</a></span><span class="punctuation">]</span>
		<span class="keyword" id="Examples.SeqTests.TestAddition()" data-toggle="tooltip" title="Examples.SeqTests.TestAddition()">public</span> <span class="keyword" data-toggle="tooltip" title="void">void</span> <span data-toggle="tooltip" title="Examples.SeqTests.TestAddition()">TestAddition</span> <span class="punctuation">(</span><span class="punctuation">)</span>
		<span class="punctuation">{</span>
			<span data-toggle="tooltip" title="Examples.SeqTests.CheckAddition<int>()"><a href="../Examples/SeqTests.html#Examples.SeqTests.CheckAddition<T>()">CheckAddition</a></span><span class="punctuation">&lt;</span><span class="keyword" data-toggle="tooltip" title="int">int</span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
			<span data-toggle="tooltip" title="Examples.SeqTests.CheckAddition<string>()"><a href="../Examples/SeqTests.html#Examples.SeqTests.CheckAddition<T>()">CheckAddition</a></span><span class="punctuation">&lt;</span><span class="keyword" data-toggle="tooltip" title="string">string</span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
		<span class="punctuation">}</span>
</code></pre>
<h2 id="testing-removal">Testing Removal</h2>
<p>The last feature we test is removing an item.</p>
<pre class="csharp"><code class="csharp">		<span class="keyword" id="Examples.SeqTests.CheckRemoval<T>()" data-toggle="tooltip" title="Examples.SeqTests.CheckRemoval<T>()">public</span> <span class="keyword" data-toggle="tooltip" title="void">void</span> <span data-toggle="tooltip" title="Examples.SeqTests.CheckRemoval<T>()">CheckRemoval</span><span class="punctuation">&lt;</span><span class="typename"><a href="../Examples/SeqTests.html#T">T</a></span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span>
		<span class="punctuation">{</span>
</code></pre>
<p>Let's again generate an arbitrary sequence and make sure it is not
empty. This time we use the <code>SuchThat</code> combinator defined for the
<code>IArbitrary</code> interface, which filters out all the randomly generated
values that do not match a given predicate. This has the benefit
that no test cases are discarded, but it also makes the test run
a bit longer. Also, if the predicate is too strict, <code>SuchThat</code>
might not find a suitable value. In this case the generator will
fail and throw an exception.</p>
<pre class="csharp"><code class="csharp">			<span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>">(</span><span class="keyword">from</span> seq <span class="keyword">in</span> <span class="typename" data-toggle="tooltip" title="LinqCheck.Prop"><a href="../src/Prop.html#LinqCheck.Prop">Prop</a></span><span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop.ForAll<ExtensionCord.Seq<T>>(LinqCheck.IArbitrary<ExtensionCord.Seq<T>>)">.</span><span data-toggle="tooltip" title="LinqCheck.Prop.ForAll<ExtensionCord.Seq<T>>(LinqCheck.IArbitrary<ExtensionCord.Seq<T>>)"><a href="../src/Prop.html#LinqCheck.Prop.ForAll<T>(LinqCheck.IArbitrary<T>)">ForAll</a></span> <span class="punctuation">(</span><span data-toggle="tooltip" title="Examples.SeqTests.ArbitrarySeq<T>()"><a href="../Examples/SeqTests.html#Examples.SeqTests.ArbitrarySeq<T>()">ArbitrarySeq</a></span><span class="punctuation">&lt;</span><span class="typename" data-toggle="tooltip" title="T"><a href="../Examples/SeqTests.html#T">T</a></span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation" data-toggle="tooltip" title="LinqCheck.IArbitrary<ExtensionCord.Seq<T>>.SuchThat<ExtensionCord.Seq<T>>(System.Func<ExtensionCord.Seq<T>, bool>)">.</span><span data-toggle="tooltip" title="LinqCheck.IArbitrary<ExtensionCord.Seq<T>>.SuchThat<ExtensionCord.Seq<T>>(System.Func<ExtensionCord.Seq<T>, bool>)"><a href="../src/Arbitrary.html#LinqCheck.Arbitrary.SuchThat<T>(LinqCheck.IArbitrary<T>, System.Func<T, bool>)">SuchThat</a></span> <span class="punctuation">(</span>
				s <span class="punctuation" data-toggle="tooltip" title="lambda expression">=&gt;</span> <span class="punctuation" data-toggle="tooltip" title="bool">!</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>">s</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>.IsEmpty<T>()">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>.IsEmpty<T>()">IsEmpty</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span>
</code></pre>
<p>Next we need to select from the sequence an arbitrary item that we
can remove. We do this by calling <code>Prop.Any</code>. It differs from
<code>Prop.ForAll</code> in that it takes <code>Gen&lt;T&gt;</code> as an argument instead
of <code>IArbitrary&lt;T&gt;</code>. This means that the random values generated
by <code>Any</code> are not shrunk, if the test fails.</p>
<p>Also, the values produced by <code>Any</code> might depend on the other
generated values. As in this case, the chosen element must be
inside the sequence that we generated previously. It would not
make sense to shrink this value, because then we would probably
loose the failing test case.</p>
<p>In general, we need to make sure that the same input data
provides always the same result, and that our test case is
deterministic. Given the same parameters, <code>Any</code> produces always
the same result, whereas <code>ForAll</code> will produce a different value
every time it is called.</p>
<pre class="csharp"><code class="csharp">			 <span class="keyword">from</span> item <span class="keyword">in</span> <span class="typename" data-toggle="tooltip" title="LinqCheck.Prop"><a href="../src/Prop.html#LinqCheck.Prop">Prop</a></span><span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop.Any<T>(LinqCheck.Gen<T>)">.</span><span data-toggle="tooltip" title="LinqCheck.Prop.Any<T>(LinqCheck.Gen<T>)"><a href="../src/Prop.html#LinqCheck.Prop.Any<T>(LinqCheck.Gen<T>)">Any</a></span> <span class="punctuation">(</span><span class="typename" data-toggle="tooltip" title="LinqCheck.Gen"><a href="../src/Gen.html#LinqCheck.Gen">Gen</a></span><span class="punctuation" data-toggle="tooltip" title="LinqCheck.Gen.ElementOf<T>(System.Collections.Generic.IEnumerable<T>)">.</span><span data-toggle="tooltip" title="LinqCheck.Gen.ElementOf<T>(System.Collections.Generic.IEnumerable<T>)"><a href="../src/Gen.html#LinqCheck.Gen.ElementOf<T>(System.Collections.Generic.IEnumerable<T>)">ElementOf</a></span> <span class="punctuation">(</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>">seq</span><span class="punctuation">)</span><span class="punctuation">)</span>
</code></pre>
<p>Now we can remove the chosen item and return the test case.</p>
<pre class="csharp"><code class="csharp">			 <span class="keyword">let</span> newSeq <span class="punctuation">=</span> <span data-toggle="tooltip" title="ExtensionCord.Seq<T>">seq</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>.Remove<T>(T)">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>.Remove<T>(T)">Remove</span> <span class="punctuation">(</span><span data-toggle="tooltip" title="T">item</span><span class="punctuation">)</span>
			 <span class="keyword" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>">select</span> <span class="keyword" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">new</span> <span class="punctuation" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">{</span> <span data-toggle="tooltip" title="ExtensionCord.Seq<T>">seq</span><span class="punctuation" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">,</span> <span data-toggle="tooltip" title="T">item</span><span class="punctuation" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">,</span> <span data-toggle="tooltip" title="ExtensionCord.Seq<T>">newSeq</span> <span class="punctuation" data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">}</span><span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>">)</span>
</code></pre>
<p>The new sequence should be one item shorter than the original one.</p>
<pre class="csharp"><code class="csharp">			<span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>.Check<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>(System.Linq.Expressions.Expression<System.Func<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>, bool>>, int)">.</span><span data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>.Check<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>(System.Linq.Expressions.Expression<System.Func<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>, bool>>, int)"><a href="../src/Prop.html#LinqCheck.Prop.Check<T>(LinqCheck.Prop<T>, System.Linq.Expressions.Expression<System.Func<T, bool>>, int)">Check</a></span> <span class="punctuation">(</span>t <span class="punctuation" data-toggle="tooltip" title="lambda expression">=&gt;</span> <span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.newSeq">newSeq</a></span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>.IsEmpty<T>()">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>.IsEmpty<T>()">IsEmpty</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation" data-toggle="tooltip" title="bool.Implies(bool)">.</span><span data-toggle="tooltip" title="bool.Implies(bool)">Implies</span> <span class="punctuation">(</span><span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.seq">seq</a></span><span class="punctuation" data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.Count<T>()">.</span><span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.Count<T>()">Count</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation" data-toggle="tooltip" title="bool">==</span> <span class="number" data-toggle="tooltip" title="int">1</span><span class="punctuation">)</span> <span class="punctuation" data-toggle="tooltip" title="bool">||</span>
				<span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.newSeq">newSeq</a></span><span class="punctuation" data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.Count<T>()">.</span><span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.Count<T>()">Count</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation" data-toggle="tooltip" title="bool">==</span> <span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.seq">seq</a></span><span class="punctuation" data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.Count<T>()">.</span><span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.Count<T>()">Count</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation" data-toggle="tooltip" title="int">-</span> <span class="number" data-toggle="tooltip" title="int">1</span><span class="punctuation">)</span>
</code></pre>
<p>If we still find the same item that was removed in the new sequence,
it must be a duplicate, and thus appear at least twice.</p>
<pre class="csharp"><code class="csharp">			<span class="punctuation" data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>.Check<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>(System.Linq.Expressions.Expression<System.Func<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>, bool>>, int)">.</span><span data-toggle="tooltip" title="LinqCheck.Prop<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>.Check<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>>(System.Linq.Expressions.Expression<System.Func<<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>, bool>>, int)"><a href="../src/Prop.html#LinqCheck.Prop.Check<T>(LinqCheck.Prop<T>, System.Linq.Expressions.Expression<System.Func<T, bool>>, int)">Check</a></span> <span class="punctuation">(</span>t <span class="punctuation" data-toggle="tooltip" title="lambda expression">=&gt;</span> <span class="punctuation" data-toggle="tooltip" title="bool">!</span><span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.newSeq">newSeq</a></span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>.Contains<T>(T)">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>.Contains<T>(T)">Contains</span> <span class="punctuation">(</span><span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="T">.</span><span data-toggle="tooltip" title="T"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.item">item</a></span><span class="punctuation">)</span> <span class="punctuation" data-toggle="tooltip" title="bool">||</span>
				<span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="ExtensionCord.Seq<T>">.</span><span data-toggle="tooltip" title="ExtensionCord.Seq<T>"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.seq">seq</a></span><span class="punctuation" data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.Count<T>(System.Func<T, bool>)">.</span><span data-toggle="tooltip" title="System.Collections.Generic.IEnumerable<T>.Count<T>(System.Func<T, bool>)">Count</span> <span class="punctuation">(</span>i <span class="punctuation" data-toggle="tooltip" title="lambda expression">=&gt;</span> <span data-toggle="tooltip" title="T">i</span><span class="punctuation" data-toggle="tooltip" title="object.Equals(object)">.</span><span data-toggle="tooltip" title="object.Equals(object)">Equals</span> <span class="punctuation">(</span><span data-toggle="tooltip" title="<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>">t</span><span class="punctuation" data-toggle="tooltip" title="T">.</span><span data-toggle="tooltip" title="T"><a href="../Examples/SeqTests.html#<anonymous type: ExtensionCord.Seq<T> seq, T item, ExtensionCord.Seq<T> newSeq>.item">item</a></span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation" data-toggle="tooltip" title="bool">&gt;</span> <span class="number" data-toggle="tooltip" title="int">1</span><span class="punctuation">)</span><span class="punctuation">;</span>
		<span class="punctuation">}</span>
</code></pre>
<p>Let's call our check with a few different item types.</p>
<pre class="csharp"><code class="csharp">		<span class="punctuation">[</span><span class="typename" data-toggle="tooltip" title="LinqCheck.TestAttribute"><a href="../src/Tester.html#LinqCheck.TestAttribute.TestAttribute()">Test</a></span><span class="punctuation">]</span>
		<span class="keyword" id="Examples.SeqTests.TestRemoval()" data-toggle="tooltip" title="Examples.SeqTests.TestRemoval()">public</span> <span class="keyword" data-toggle="tooltip" title="void">void</span> <span data-toggle="tooltip" title="Examples.SeqTests.TestRemoval()">TestRemoval</span> <span class="punctuation">(</span><span class="punctuation">)</span>
		<span class="punctuation">{</span>
			<span data-toggle="tooltip" title="Examples.SeqTests.CheckRemoval<char>()"><a href="../Examples/SeqTests.html#Examples.SeqTests.CheckRemoval<T>()">CheckRemoval</a></span><span class="punctuation">&lt;</span><span class="keyword" data-toggle="tooltip" title="char">char</span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
			<span data-toggle="tooltip" title="Examples.SeqTests.CheckRemoval<int>()"><a href="../Examples/SeqTests.html#Examples.SeqTests.CheckRemoval<T>()">CheckRemoval</a></span><span class="punctuation">&lt;</span><span class="keyword" data-toggle="tooltip" title="int">int</span><span class="punctuation">&gt;</span> <span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
		<span class="punctuation">}</span>
	<span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre>
<h2 id="next-steps">Next Steps</h2>
<p>We went through some simple but powerfull constructs of LinqCheck. Next we
will show how you can test code which has mutable state, and review few special
constructs provided by the library.</p>

				</div>
				<ul class="pager">
	<li class="previous"><a href="../Examples/BasicTests.html">Previous: BasicTests</a></li>
	<li class="next"><a href="../Examples/RunTests.html">Next: RunTests</a></li>
</ul>
			</div>
        </div>
    </div>
    
    <footer class="panel-footer text-center">
        <p>Copyright  2018 Tommi Johtela</p>
    </footer>


    
    <script src="../bootstrap/js/jquery.min.js"></script>
    <script src="../bootstrap/js/bootstrap.min.js"></script>
    <script src="../sidebar/sidebar.js"></script>
    <script src="../syntax-highlight/syntax.js"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
        extensions: ["jsMath2jax.js"]
        });
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML'></script>
	<script src="../mermaid/mermaid.min.js"></script>
	<script>mermaid.initialize({startOnLoad:true});</script>
</body>
</html>